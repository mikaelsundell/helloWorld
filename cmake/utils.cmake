# Copyright 2022-present Contributors to the helloWorld project.
# SPDX-License-Identifier: BSD-3-Clause
# https://github.com/mikaelsundell/helloWorld

function (dump_configuration project)
    message ("Project                = ${project}")
    message ("CMake                  = ${CMAKE_VERSION}")
    message ("CMake system           = ${CMAKE_SYSTEM}")
    message ("CMake system name      = ${CMAKE_SYSTEM_NAME}")
    message ("Project source dir     = ${PROJECT_SOURCE_DIR}")
    message ("Project build dir      = ${CMAKE_BINARY_DIR}")
    message ("Project install prefix = ${CMAKE_INSTALL_PREFIX}")
endfunction()

function (dump_all)
    get_cmake_property (VAR_NAMES VARIABLES)
    foreach (VAR_NAME ${VAR_NAMES})
        message("${VAR_NAME}: ${${VAR_NAME}}")
    endforeach()
endfunction()

function (dump_properties property)
    get_cmake_property (VAR_NAMES VARIABLES)
    foreach (VAR_NAME ${VAR_NAMES})
        string(REGEX MATCH "^${property}" IS_MATCH ${VAR_NAME})
        if(IS_MATCH)
            message("${VAR_NAME}: ${${VAR_NAME}}")
        endif()
    endforeach()
endfunction()

function (dump_fetch fetch)
    message("Source dir: ${${fetch}_SOURCE_DIR}")
    message("Binary dir: ${${fetch}_BINARY_DIR}")
    get_target_property(include_dirs ${fetch} INTERFACE_INCLUDE_DIRECTORIES)
    message("Include directories ${fetch}:")
    foreach(include_dir IN LISTS include_dirs)
        message("  ${include_dir}")
    endforeach()
    get_target_property(target_libraries ${fetch} LINK_LIBRARIES)
    if (NOT target_libraries)
        message("Dependent link libraries ${fetch}: None")
    else()
        message("Dependent link libraries ${fetch}:")
        foreach(library IN LISTS target_libraries)
            message("  ${library}")
        endforeach()
    endif ()
endfunction()
